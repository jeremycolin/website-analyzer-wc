!function(n){"use strict";const e=String.raw,t={"input.placeholder":"Enter your website URL","button.analyze":"Analyze","span.error":"Enter a valid URL","span.no-data":"Sorry we are not able to find reliable performance data for this URL","performance-bar.legend":"Metrics for real users measured by Google Chrome at the 75th percentile on mobile","lcp.legend":"Is it visible fast?","cls.legend":"Is it stable?","inp.legend":"Is it responsive?"};function r(n,e,t,r){return new(t||(t=Promise))((function(o,i){function a(n){try{d(r.next(n))}catch(n){i(n)}}function l(n){try{d(r.throw(n))}catch(n){i(n)}}function d(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,l)}d((r=r.apply(n,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const o=new RegExp(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gi),i=new RegExp(/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/gi);const a=["lcp","cls","inp"],l={lcp:{fair:2500,poor:4e3,display:4e3},inp:{fair:200,poor:500,display:50},cls:{fair:.1,poor:.25,display:.2}},d=(n,t,r)=>{const o=((n,e)=>{switch(n){case"inp":return`${Math.round(e)}ms`;case"cls":return`${e.toFixed(3)}`;default:return`${(e/1e3).toFixed(2)}s`}})(t,n),{goodGrow:i,fairGrow:a,poorGrow:d,metricPos:c,markerAdjust:s}=(({fair:n,poor:e,value:t,displayEnd:r})=>{const o=t<n?"good":t<e?"fair":"poor";let i=r;return("poor"===o||t>.95*i)&&(i=1.14*t),{goodGrow:Math.min(n,i)/i,fairGrow:(Math.min(e,i)-Math.min(n,i))/i,poorGrow:(i-Math.min(e,i))/i,metricPos:Math.round(t/i*1e4+Number.EPSILON)/100,markerAdjust:"good"===o?4:2}})({fair:l[t].fair,poor:l[t].poor,displayEnd:l[t].display,value:n});return e`<div id="performance-bar">
    <div class="legend-metric-title">
      ${r[`${t}.legend`]}
      <a href="https://web.dev/${t}">${t.toUpperCase()}</a>
    </div>
    <div
      class="legend-metric"
      style="padding-left: calc(${c}% - ${s}px - ${4*o.length}px);"
    >
      ${o}
    </div>
    <div style="display: flex">
      <span style="flex-grow: ${i}; margin-right: 1px;">
        <div class="good bar"></div>
      </span>
      <span style="flex-grow: ${a}; margin-left: 1px; margin-right: 1px">
        <div class="fair bar"></div>
      </span>
      <span style="flex-grow: ${d}; margin-left: 1px">
        <div class="poor bar"></div>
      </span>
    </div>
    <div class="marker" style="padding-left: calc(${c}% - ${s}px);"></div>
  </div>`},c=n=>n.getElementById("container"),s=n=>n.getElementById("input"),p=n=>n.getElementById("span-error");function m(n){const e=(n=>n.getElementById("loading-spinner"))(n);e&&c(n).removeChild(e)}class f extends HTMLElement{constructor(){super();const n=t;try{const l=this.attachShadow({mode:"open"}),f=document.createElement("template");f.innerHTML=e`<style>
          ${"#container {\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n  padding-bottom: 0.5rem;\n  min-height: 27rem;\n  background-color: #ffffff;\n  line-height: initial;\n}\n\n#form {\n  display: flex;\n  height: 3rem;\n}\n\n#input {\n  flex: 1;\n  padding: 0 0.5rem;\n  margin-right: 1rem;\n  background-color: #ffffff;\n  color: #000000;\n  border: 2px solid #94a3b8;\n  border-radius: 4px;\n  outline: none;\n}\n\n#input:focus {\n  border: 2px solid #475569;\n}\n\n#input.error {\n  border-color: #d93025;\n  padding: 1rem 0.5rem;\n}\n\n#span-error {\n  color: #d93025;\n  padding: 0.5rem;\n}\n\nbutton {\n  cursor: pointer;\n  border: 0;\n  padding: 0 1rem;\n  background: #475569;\n  color: #ffffff;\n}\n\n#loading-spinner {\n  height: 4rem;\n  width: 4rem;\n  margin: auto;\n}\n\n#no-data {\n  color: #000000;\n  margin: auto;\n}\n\n#performance-bars-container-legend {\n  font-weight: 600;\n  margin-top: 2rem;\n  color: #000000;\n  text-align: left;\n}\n\n#performance-bar {\n  color: #000000;\n  height: 5rem;\n}\n\n.legend-metric-title {\n  text-align: left;\n  margin-top: 1.5rem;\n}\n\n.legend-metric {\n  font-weight: 500;\n  margin-top: 0.2rem;\n  margin-bottom: 0.5rem;\n}\n\n.bar {\n  width: 100%;\n  height: 1rem;\n}\n\n.marker {\n  display: inline-block;\n  border-right: 2px solid black;\n  height: 2rem;\n  position: relative;\n  top: -24px;\n}\n\n.good {\n  background-color: #0cce6a;\n}\n\n.fair {\n  background-color: #ffa400;\n}\n\n.poor {\n  background-color: #ff4e43;\n}\n\n#form,\n#input,\n#performance-bars-container-legend,\nbutton,\n.legend-metric-title,\n.legend-metric {\n  font-size: 1rem;\n}\n\n@media only screen and (max-width: 600px) {\n  #form,\n  #input,\n  #performance-bars-container-legend,\n  button,\n  .legend-metric-title,\n  .legend-metric {\n    font-size: 0.8rem;\n  }\n\n  .legend-metric-title {\n    margin-top: 0.6rem;\n  }\n\n  #performance-bars-container-legend {\n    margin-top: 1rem;\n  }\n\n  #container {\n    min-height: 24rem;\n  }\n}\n"}
        </style>
        <div id="container">${(n=>e`<form id="form">
  <input
    id="input"
    name="website"
    placeholder="${n["input.placeholder"]}"
    autocorrect="off"
    autocapitalize="none"
  />
  <button>${n["button.analyze"]}</button>
</form>`)(n)}</div>`,l.appendChild(f.content.cloneNode(!0));const g=c(l),u=(n=>n.getElementById("form"))(l),h=s(l);let b;function v(e){return r(this,void 0,void 0,(function*(){e.preventDefault(),m(l),function(n){const e=(n=>n.getElementById("performance-bars-container"))(n);e&&c(n).removeChild(e);const t=(n=>n.getElementById("no-data"))(n);t&&c(n).removeChild(t)}(l),b&&b.abort(),b=new AbortController;const t=new FormData(e.target),{website:f}=Object.fromEntries(t),{isValid:u,httpUrl:v}=function(n){if(!n.startsWith("https://")&&!n.startsWith("http://"))return Boolean(n.match(i))?{isValid:!0,httpUrl:`https://${n}`}:{isValidUrl:!1,httpUrl:""};return{isValid:Boolean(n.match(o)),httpUrl:n}}(f);if(u){!function(n){const e=p(n);e&&c(n).removeChild(e);const t=s(n);t.classList.contains("error")&&t.classList.remove("error")}(l),function(n,e){const t=document.createElement("template");t.innerHTML=e,n.appendChild(t.content.cloneNode(!0))}(g,'<svg xmlns="http://www.w3.org/2000/svg" width="1rem" height="1rem" viewBox="0 0 24 24" id="loading-spinner">\n  <path fill="#475569" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity="0.25"/>\n  <path fill="#475569" d="M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z">\n    <animateTransform attributeName="transform" dur="0.75s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/>\n  </path>\n</svg>\n');try{const e=yield function(n,e){return r(this,void 0,void 0,(function*(){return fetch(`https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url=${encodeURIComponent(n)}&category=PERFORMANCE&strategy=MOBILE`,{signal:e.signal,headers:{"Content-Type":"application/json"}}).then((n=>{if(!n.ok)throw"Unable to fetch data, status: response.status";return n.json()})).then((n=>{var e,t,r;return n.error?Promise.reject(n):{lcp:null===(e=n.originLoadingExperience.metrics.LARGEST_CONTENTFUL_PAINT_MS)||void 0===e?void 0:e.percentile,inp:null===(t=n.originLoadingExperience.metrics.INTERACTION_TO_NEXT_PAINT)||void 0===t?void 0:t.percentile,cls:null===(r=n.originLoadingExperience.metrics.CUMULATIVE_LAYOUT_SHIFT_SCORE)||void 0===r?void 0:r.percentile}}))}))}(v,b);m(l),function(n,e,t){const r=document.createElement("div");r.id="performance-bars-container",c(e).appendChild(r),a.forEach((e=>{if(void 0===n[e])return;const o=document.createElement("template");o.innerHTML=d(n[e],e,t),r.appendChild(o.content.cloneNode(!0))}));const o=document.createElement("div");o.id="performance-bars-container-legend",o.innerHTML=t["performance-bar.legend"],r.appendChild(o)}(e,l,n)}catch(e){console.error("Unable to fetch peformance data: ",e),m(l),function(n,e){const t=document.createElement("span");t.id="no-data",t.innerHTML=e["span.no-data"],n.appendChild(t)}(g,n)}}else!function(n){n.classList.contains("errror")||n.classList.add("error")}(h),function(n,e,t){if(!p(e)){const e=document.createElement("span");e.id="span-error",e.innerHTML=t["span.error"],n.appendChild(e)}}(g,l,n);return!1}))}u.addEventListener("submit",v)}catch(w){console.log(w)}}}customElements.define("website-analyzer",f),n.WebsiteAnalyzer=f}({});
